<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>üîç DIAGNOSTIC TOOL</title>
    <style>
        body {
            font-family: 'Courier New', monospace;
            background: #1a1a1a;
            color: #00ff00;
            padding: 20px;
            line-height: 1.6;
        }
        .header {
            background: #2a2a2a;
            padding: 20px;
            border: 2px solid #00ff00;
            margin-bottom: 20px;
        }
        .section {
            background: #2a2a2a;
            padding: 15px;
            margin: 10px 0;
            border-left: 4px solid #00ff00;
        }
        .error { color: #ff0000; }
        .warning { color: #ffaa00; }
        .success { color: #00ff00; }
        .info { color: #00aaff; }
        button {
            background: #00ff00;
            color: #000;
            border: none;
            padding: 15px 30px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            margin: 10px 5px;
        }
        button:hover {
            background: #00cc00;
        }
        .result {
            background: #000;
            padding: 15px;
            margin: 10px 0;
            border: 1px solid #00ff00;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üîç DIAGNOSTIC TOOL - Spacing Issue</h1>
        <p>Tool ini akan mengecek kenapa spacing tidak muncul</p>
    </div>

    <div class="section">
        <h2>üìä Step 1: Check Current Page</h2>
        <button onclick="checkCurrentPage()">RUN DIAGNOSTIC</button>
        <div id="diagnostic-result" class="result"></div>
    </div>

    <div class="section">
        <h2>üîß Step 2: Force Fix Spacing</h2>
        <p>Klik tombol ini untuk paksa inject spacing dengan JavaScript:</p>
        <button onclick="forceFixSpacing()">FORCE FIX NOW!</button>
        <div id="fix-result" class="result"></div>
    </div>

    <div class="section">
        <h2>üöÄ Step 3: Open Fresh Page</h2>
        <button onclick="openFreshPage()">OPEN PORT 3000</button>
    </div>

    <script>
        function log(message, type = 'info') {
            const colors = {
                error: '#ff0000',
                warning: '#ffaa00',
                success: '#00ff00',
                info: '#00aaff'
            };
            return `<span style="color: ${colors[type]}">${message}</span>\n`;
        }

        function checkCurrentPage() {
            const resultDiv = document.getElementById('diagnostic-result');
            let output = '';

            output += log('=== DIAGNOSTIC REPORT ===', 'info');
            output += log('');

            // Check 1: Port
            const port = window.location.port || '80';
            if (port === '3000') {
                output += log('‚úÖ PORT: 3000 (CORRECT!)', 'success');
            } else {
                output += log(`‚ùå PORT: ${port} (WRONG! Should be 3000)`, 'error');
            }

            // Check 2: Cache buster
            const hasNocache = window.location.search.includes('_nocache');
            const hasVersion = window.location.search.includes('_v=');
            if (hasNocache || hasVersion) {
                output += log('‚úÖ CACHE BUSTER: Present', 'success');
            } else {
                output += log('‚ùå CACHE BUSTER: Missing', 'error');
            }

            // Check 3: Elements
            output += log('');
            output += log('--- Checking Elements ---', 'info');
            
            const selectors = {
                'Help Section': '.help-section-wrapper',
                'Trusted Partners': '.trusted-partners-wrapper',
                'About Section': '.about-section-wrapper',
                'Container': '.homepage-sections-container'
            };

            for (const [name, selector] of Object.entries(selectors)) {
                const el = document.querySelector(selector);
                if (el) {
                    const styles = window.getComputedStyle(el);
                    output += log(`‚úÖ ${name}: Found`, 'success');
                    output += log(`   Margin Top: ${styles.marginTop}`);
                    output += log(`   Margin Bottom: ${styles.marginBottom}`);
                    output += log(`   Border: ${styles.border}`);
                    output += log(`   Background: ${styles.backgroundColor}`);
                } else {
                    output += log(`‚ùå ${name}: NOT FOUND!`, 'error');
                }
            }

            // Check 4: Inline styles
            output += log('');
            output += log('--- Checking Inline Styles ---', 'info');
            const wrapper = document.querySelector('.trusted-partners-wrapper');
            if (wrapper) {
                const inlineStyle = wrapper.getAttribute('style');
                if (inlineStyle && inlineStyle.includes('border')) {
                    output += log('‚úÖ INLINE STYLES: Present (NEW VERSION!)', 'success');
                    output += log(`   Style: ${inlineStyle.substring(0, 100)}...`);
                } else {
                    output += log('‚ùå INLINE STYLES: Missing (OLD VERSION!)', 'error');
                }
            }

            // Summary
            output += log('');
            output += log('=== CONCLUSION ===', 'info');
            if (port !== '3000') {
                output += log('üî¥ MASALAH: Anda membuka PORT SALAH!', 'error');
                output += log('   SOLUSI: Close tab ini, buka port 3000!', 'warning');
            } else if (!hasNocache && !hasVersion) {
                output += log('üî¥ MASALAH: CACHE BROWSER!', 'error');
                output += log('   SOLUSI: Tekan Ctrl+Shift+R untuk hard refresh!', 'warning');
            } else {
                output += log('‚úÖ Semua check passed!', 'success');
                output += log('   Kalau masih menempel, klik "FORCE FIX NOW!"', 'info');
            }

            resultDiv.innerHTML = output;
        }

        function forceFixSpacing() {
            const resultDiv = document.getElementById('fix-result');
            let output = '';

            output += log('üîß Applying force fix...', 'info');
            output += log('');

            // Open main page di tab baru dengan JavaScript inject
            const code = encodeURIComponent(`
                setTimeout(() => {
                    const selectors = ['.help-section-wrapper', '.trusted-partners-wrapper', '.about-section-wrapper'];
                    const colors = ['red', 'blue', 'green'];
                    selectors.forEach((sel, idx) => {
                        const el = document.querySelector(sel);
                        if (el) {
                            el.style.marginTop = '4rem';
                            el.style.marginBottom = '4rem';
                            el.style.paddingTop = '3rem';
                            el.style.paddingBottom = '3rem';
                            el.style.border = '3px dashed ' + colors[idx];
                            el.style.backgroundColor = 'rgba(' + (idx===0?'255,0,0':idx===1?'0,0,255':'0,255,0') + ', 0.05)';
                            console.log('‚úÖ Fixed: ' + sel);
                        }
                    });
                    const container = document.querySelector('.homepage-sections-container');
                    if (container) {
                        container.style.gap = '5rem';
                        console.log('‚úÖ Fixed container gap');
                    }
                }, 1000);
            `);

            const url = `http://localhost:3000/?_fix=true&_v=${Date.now()}`;
            
            output += log('‚úÖ Opening new window with force fix...', 'success');
            output += log(`   URL: ${url}`, 'info');
            output += log('');
            output += log('üìù INSTRUKSI:', 'warning');
            output += log('1. Window baru akan terbuka', 'info');
            output += log('2. Tunggu 2-3 detik', 'info');
            output += log('3. Buka Console (F12)', 'info');
            output += log('4. Paste code berikut dan Enter:', 'info');
            output += log('');
            output += log('--- PASTE CODE INI ---', 'warning');
            output += log(decodeURIComponent(code).trim());
            output += log('--- END CODE ---', 'warning');

            resultDiv.innerHTML = output;
            
            window.open(url, '_blank');
        }

        function openFreshPage() {
            const timestamp = Date.now();
            const random = Math.random().toString(36).substring(7);
            const url = `http://localhost:3000/?_nocache=true&_v=${timestamp}&_r=${random}`;
            
            alert('Akan membuka: ' + url + '\n\nSetelah terbuka, tekan Ctrl+Shift+R!');
            window.location.href = url;
        }

        // Auto run diagnostic on load
        window.addEventListener('load', () => {
            setTimeout(checkCurrentPage, 500);
        });
    </script>
</body>
</html>

